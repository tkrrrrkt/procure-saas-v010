---
description: 購買管理SaaSのコア業務ロジック、ワークフロー、承認フロー、発注・納品、請求・支払、マスターデータ管理に関する詳細なビジネスルール。
globs: ["apps/procure-erp-backend/src/modules/**/*.ts", "apps/procure-erp-frontend/src/app/**/*.tsx"] # バックエンドのロジックやフロントエンドのUIに関連する場合に適用
type: AutoAttached # または Agent Requested [cite: 65]
priority: 6
tags: ["business-logic", "procurement", "workflow"]
version: "1.0.0"
---
# 購買管理固有のビジネスルール

AIエージェントは、購買管理SaaSのコア業務ロジックを理解し、以下のビジネスルールに準拠した実装を行うこと。

## 7.1. 購買ワークフロー
- **リクエスト作成**: ユーザーは購買リクエストを作成し、必要な情報（品目、数量、納期、予算コードなど）を入力する。 [cite: 13]
- **承認フロー**: 金額に応じた段階的な承認プロセスを実装する。 [cite: 13]
    - 承認レベル1: 部門マネージャー（10万円未満） [cite: 13]
    - 承認レベル2: 部門ディレクター（10万円以上100万円未満） [cite: 13]
    - 承認レベル3: 経営層（100万円以上） [cite: 13]
- **職務分離**: リクエスト作成者と承認者は同一人物になれないよう制限する。 [cite: 13]
- **予算確認**: 購買リクエスト時に予算残高を確認し、予算超過の場合は警告または拒否する。 [cite: 13]
- **代理承認**: 承認者不在時の代理承認機能を実装し、承認者のバックアップを指定可能にする。 [cite: 13]

## 7.2. 発注・納品管理
- **発注書生成**: 承認済みリクエストから自動的に発注書を生成する。 [cite: 14]
- **サプライヤー通知**: 発注書生成時にサプライヤーにメール通知を送信する。 [cite: 14]
- **納品確認**: 納品物と発注内容の一致を確認するプロセスを実装する。 [cite: 14]
- **検収フロー**: 納品物の検収プロセスを実装し、品質や数量の確認を記録する。 [cite: 14]
- **部分納品**: 複数回に分けての納品に対応し、納品状況を追跡可能にする。 [cite: 14]

## 7.3. 請求・支払管理
- **請求書照合**: 発注書、納品書、請求書の三者照合機能を実装する。 [cite: 15]
- **支払スケジュール**: 支払条件に基づいた支払スケジュールを管理する。 [cite: 15]
- **支払承認**: 支払い前の承認フローを実装し、不正な支払いを防止する。 [cite: 15]
- **支払実績**: 支払いの実行と記録を管理し、支払状況を追跡可能にする。 [cite: 15]
- **取引先残高管理**: サプライヤーごとの未払残高を管理し、支払予定を可視化する。 [cite: 15]

## 7.4. マスターデータ管理
- **品目マスター**: 購買対象の品目情報を管理し、カテゴリ分類や属性管理を行う。 [cite: 16]
- **サプライヤーマスター**: サプライヤー情報（連絡先、契約条件、評価など）を管理する。 [cite: 16]
- **組織マスター**: 社内組織構造と承認権限を管理し、組織変更に対応する。 [cite: 16]
- **ユーザーマスター**: ユーザー情報とロール・権限を管理し、適切なアクセス制御を行う。 [cite: 16]
- **予算マスター**: 部門・プロジェクトごとの予算情報を管理し、予算消化状況を追跡する。 [cite: 16]